<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jaffi √ölfur - Community Forum</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #121212; color: #fff; }
        header { text-align: center; padding: 20px; background: #1f1f1f; }
        nav { text-align: center; background: #222; padding: 10px; }
        nav a { color: #fff; margin: 0 15px; text-decoration: none; font-weight: bold; }
        .container { max-width: 900px; margin: 20px auto; padding: 20px; }
        input, textarea, button { width: 100%; margin: 8px 0; padding: 10px; border: none; border-radius: 5px; }
        button { background: #9d72ff; color: #fff; cursor: pointer; font-weight: bold; }
        .post { background: #1f1f1f; margin: 10px 0; padding: 15px; border-radius: 8px; }
        .like-btn, .comment-btn { margin-right: 10px; cursor: pointer; color: #9d72ff; }
        .comment-section { margin-top: 10px; padding-left: 15px; border-left: 2px solid #333; }
        .profile-pic { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
    </style>
</head>
<body>
    <header>
        <h1>Community Forum</h1>
        <p>Welcome to the Jaffi √ölfur fan community!</p>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="community.html">Community</a>
    </nav>

    <div class="container">
        <h2>√õlf Account</h2>
        <input type="text" id="reg-username" placeholder="Create Username">
        <input type="password" id="reg-password" placeholder="Create Password">
        <button onclick="register()">Register</button>
        <h3>Login</h3>
        <input type="text" id="login-username" placeholder="Username">
        <input type="password" id="login-password" placeholder="Password">
        <button onclick="login()">Login</button>
        <p id="auth-status"></p>

        <h2>Forum</h2>
        <div id="forum-tools" style="display:none;">
            <textarea id="topic-content" placeholder="Write a topic..."></textarea>
            <button onclick="createPost()">Post</button>
        </div>
        <div id="posts"></div>

        <h2>Your Profile</h2>
        <img id="profile-pic" class="profile-pic" src="https://via.placeholder.com/80">
        <p><strong>Username:</strong> <span id="profile-username"></span></p>
        <textarea id="bio" placeholder="Write your bio..."></textarea>
        <input type="file" id="profile-image">
        <button onclick="saveProfile()">Save Profile</button>
    </div>

    <script>
        // Same forum JS logic here (register, login, create posts, likes, comments, profiles)
        function register() {
            const username = document.getElementById("reg-username").value;
            const password = document.getElementById("reg-password").value;
            if (!username || !password) return alert("Fill all fields");
            if (localStorage.getItem(`user_${username}`)) return alert("User exists!");
            localStorage.setItem(`user_${username}`, JSON.stringify({password, bio:"", pic:""}));
            alert("√õlf Account created!");
        }
        function login() {
            const username = document.getElementById("login-username").value;
            const password = document.getElementById("login-password").value;
            const user = JSON.parse(localStorage.getItem(`user_${username}`));
            if (user && user.password === password) {
                localStorage.setItem("loggedInUser", username);
                document.getElementById("auth-status").innerText = `Logged in as ${username}`;
                document.getElementById("forum-tools").style.display = "block";
                loadProfile();
            } else alert("Invalid login");
        }
        function createPost() {
            const username = localStorage.getItem("loggedInUser");
            if (!username) return alert("Login required");
            const content = document.getElementById("topic-content").value;
            if (!content) return alert("Write something");
            const posts = JSON.parse(localStorage.getItem("posts") || "[]");
            posts.push({author: username, content, likes:0, comments:[]});
            localStorage.setItem("posts", JSON.stringify(posts));
            document.getElementById("topic-content").value = "";
            loadPosts();
        }
        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem("posts") || "[]");
            const container = document.getElementById("posts");
            container.innerHTML = "";
            posts.forEach((p,i) => {
                container.innerHTML += `
                    <div class="post">
                        <p><strong>${p.author}</strong>: ${p.content}</p>
                        <span class="like-btn" onclick="likePost(${i})">üëç ${p.likes}</span>
                        <span class="comment-btn" onclick="toggleComments(${i})">üí¨ Comment</span>
                        <div id="comments-${i}" class="comment-section" style="display:none;">
                            <textarea id="comment-input-${i}" placeholder="Write a comment"></textarea>
                            <button onclick="addComment(${i})">Post Comment</button>
                            <div>${p.comments.map(c=>`<p><strong>${c.user}:</strong> ${c.text}</p>`).join("")}</div>
                        </div>
                    </div>`;
            });
        }
        function likePost(i){ const posts=JSON.parse(localStorage.getItem("posts")||"[]"); posts[i].likes++; localStorage.setItem("posts",JSON.stringify(posts)); loadPosts(); }
        function toggleComments(i){ const s=document.getElementById(`comments-${i}`); s.style.display=s.style.display==="none"?"block":"none"; }
        function addComment(i){ const u=localStorage.getItem("loggedInUser"); if(!u)return alert("Login required"); const text=document.getElementById(`comment-input-${i}`).value; if(!text)return; const posts=JSON.parse(localStorage.getItem("posts")||"[]"); posts[i].comments.push({user:u,text}); localStorage.setItem("posts",JSON.stringify(posts)); loadPosts(); }
        function loadProfile(){ const u=localStorage.getItem("loggedInUser"); if(!u)return; const user=JSON.parse(localStorage.getItem(`user_${u}`)); document.getElementById("profile-username").innerText=u; document.getElementById("bio").value=user.bio||""; document.getElementById("profile-pic").src=user.pic||"https://via.placeholder.com/80"; }
        function saveProfile(){ const u=localStorage.getItem("loggedInUser"); const user=JSON.parse(localStorage.getItem(`user_${u}`)); user.bio=document.getElementById("bio").value; const file=document.getElementById("profile-image").files[0]; if(file){ const reader=new FileReader(); reader.onload=()=>{user.pic=reader.result; localStorage.setItem(`user_${u}`,JSON.stringify(user)); loadProfile();}; reader.readAsDataURL(file);} else { localStorage.setItem(`user_${u}`,JSON.stringify(user)); loadProfile(); } }
        loadPosts();
    </script>
</body>
</html>
